//
//  StringEx.swift
//  Mixed
//
//  Created by vvii on 2024/7/13.
//

import UIKit


public extension String {
    var toPinyin: String {
        self.transform([kCFStringTransformMandarinLatin, kCFStringTransformStripDiacritics], false)
    }
    
    func transform(_ transforms: [CFString], _ reverse: Bool) -> String {
        let mString = NSMutableString(string: self) as CFMutableString
        for transform in transforms {
            CFStringTransform(mString, nil, transform, reverse)
        }
        return mString as String
    }
    
    static func test_transform() {
        let array = [
            "アイスランド",
            "アイルランド",
            "アゼルバイジャン",
            "アフガニスタン",
            "アメリカ合衆国",
            "アラブ首長国連邦",
            "アルジェリア",
            "アルゼンチン",
            "アルバ",
            "アルバニア",
            "アルメニア",
            "アンギラ",
            "アンゴラ",
            "アンティグア・バーブーダ",
            "アンドラ",
            "イエメン",
            "イギリス",
            "イスラエル",
            "イタリア",
            "イラク",
            "イラン",
            "インド",
            "インドネシア",
            "ウォリス・フツナ",
            "ウガンダ",
            "ウクライナ",
            "ウズベキスタン",
            "ウルグアイ",
            "エクアドル",
            "エジプト",
            "エストニア",
            "エスワティニ",
            "エチオピア",
            "エリトリア",
            "エルサルバドル",
            "オーストラリア",
            "オーストリア",
            "オーランド諸島",
            "オマーン",
            "オランダ",
            "オランダ領カリブ",
            "ガーナ",
            "カーボベルデ",
            "ガーンジー",
            "ガイアナ",
            "カザフスタン",
            "カタール",
            "カナダ",
            "ガボン",
            "カメルーン",
            "ガンビア",
            "カンボジア",
            "ギニア",
            "ギニアビサウ",
            "キプロス",
            "キューバ",
            "キュラソー",
            "ギリシャ",
            "キリバス",
            "キルギス",
            "グアテマラ",
            "グアドループ",
            "グアム",
            "クウェート",
            "クック諸島",
            "グリーンランド",
            "クリスマス島",
            "グレナダ",
            "クロアチア",
            "ケイマン諸島",
            "ケニア",
            "コートジボワール",
            "ココス(キーリング)諸島",
            "コスタリカ",
            "コモロ",
            "コロンビア",
            "コンゴ共和国(ブラザビル)",
            "コンゴ民主共和国(キンシャサ)",
            "サウジアラビア",
            "サウスジョージア・サウスサンドウィッチ諸島",
            "サモア",
            "サン・バルテルミー",
            "サン・マルタン",
            "サントメ・プリンシペ",
            "ザンビア",
            "サンピエール島・ミクロン島",
            "サンマリノ",
            "シエラレオネ",
            "ジブチ",
            "ジブラルタル",
            "ジャージー",
            "ジャマイカ",
            "ジョージア",
            "シリア",
            "シンガポール",
            "シント・マールテン",
            "ジンバブエ",
            "スイス",
            "スウェーデン",
            "スーダン",
            "スバールバル諸島・ヤンマイエン島",
            "スペイン",
            "スリナム",
            "スリランカ",
            "スロバキア",
            "スロベニア",
            "セーシェル",
            "セネガル",
            "セルビア",
            "セントクリストファー・ネーヴィス",
            "セントビンセント及びグレナディーン諸島",
            "セントヘレナ",
            "セントルシア",
            "ソマリア",
            "ソロモン諸島",
            "タークス・カイコス諸島",
            "タイ",
            "タジキスタン",
            "タンザニア",
            "チェコ",
            "チャド",
            "チュニジア",
            "チリ",
            "ツバル",
            "デンマーク",
            "ドイツ",
            "トーゴ",
            "トケラウ",
            "ドミニカ共和国",
            "ドミニカ国",
            "トリニダード・トバゴ",
            "トルクメニスタン",
            "トルコ",
            "トンガ",
            "ナイジェリア",
            "ナウル",
            "ナミビア",
            "ニウエ",
            "ニカラグア",
            "ニジェール",
            "ニューカレドニア",
            "ニュージーランド",
            "ネパール",
            "ノーフォーク島",
            "ノルウェー",
            "ハード島・マクドナルド諸島",
            "バーレーン",
            "ハイチ",
            "パキスタン",
            "バチカン市国",
            "パナマ",
            "バヌアツ",
            "バハマ",
            "パプアニューギニア",
            "バミューダ",
            "パラオ",
            "パラグアイ",
            "バルバドス",
            "パレスチナ自治区",
            "ハンガリー",
            "バングラデシュ",
            "ピトケアン諸島",
            "フィジー",
            "フィリピン",
            "フィンランド",
            "ブータン",
            "ブーベ島",
            "プエルトリコ",
            "フェロー諸島",
            "フォークランド諸島",
            "ブラジル",
            "フランス",
            "ブルガリア",
            "ブルキナファソ",
            "ブルネイ",
            "ブルンジ",
            "ベトナム",
            "ベナン",
            "ベネズエラ",
            "ベラルーシ",
            "ベリーズ",
            "ペルー",
            "ベルギー",
            "ポーランド",
            "ボスニア・ヘルツェゴビナ",
            "ボツワナ",
            "ボリビア",
            "ポルトガル",
            "ホンジュラス",
            "マーシャル諸島",
            "マダガスカル",
            "マヨット",
            "マラウイ",
            "マリ",
            "マルタ",
            "マルティニーク",
            "マレーシア",
            "マン島",
            "ミクロネシア連邦",
            "ミャンマー",
            "メキシコ",
            "モーリシャス",
            "モーリタニア",
            "モザンビーク",
            "モナコ",
            "モルディブ",
            "モルドバ",
            "モロッコ",
            "モンゴル",
            "モンテネグロ",
            "モントセラト",
            "ヨルダン",
            "ラオス",
            "ラトビア",
            "リトアニア",
            "リビア",
            "リヒテンシュタイン",
            "リベリア",
            "ルーマニア",
            "ルクセンブルク",
            "ルワンダ",
            "レソト",
            "レバノン",
            "レユニオン",
            "ロシア",
            "英領インド洋地域",
            "英領ヴァージン諸島",
            "韓国",
            "合衆国領有小離島",
            "西サハラ",
            "赤道ギニア",
            "台湾",
            "中央アフリカ共和国",
            "中華人民共和国マカオ特別行政区",
            "中華人民共和国香港特別行政区",
            "中国",
            "東ティモール",
            "南アフリカ",
            "南スーダン",
            "南極",
            "日本",
            "仏領ギアナ",
            "仏領ポリネシア",
            "仏領極南諸島",
            "米領ヴァージン諸島",
            "米領サモア",
            "北マケドニア",
            "北マリアナ諸島",
            "北朝鮮",
        ]
        let dict = Dictionary(grouping: array, by: {
//            WanaKana.toRomaji($0, options: Options(
//                imeMode: .on
//            ))?.first?.description ?? "nil"
            $0.transform([kCFStringTransformToLatin], false)
        })
        print(dict.keys)
        
    }
}
